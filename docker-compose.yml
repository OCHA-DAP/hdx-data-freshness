##############################################################################
# HDX DATA FRESHNESS:
#
#  Database:
#   - PostgreSQL
#
#  Program:
#   - HDX Data Freshness: for collecting freshness statistics about HDX.
#
##############################################################################

version: "2"

services:
  #
  # Database
  #
  db:
    image: unocha/alpine-base-postgres
    env_file:
      - database.env
  #
  # REST api
  #
  rest:
    image: mcarans/alpine-haskell-postgrest
    ports:
      - "3000"
    env_file:
      - database.env

  #
  # Program
  #
  hdx-data-freshness:
    build: .
    volumes:
      - "./:/hdx-data-freshness"
    env_file:
      - database.env

